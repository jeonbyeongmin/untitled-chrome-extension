<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê´‘ê³  ìŒì†Œê±° í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .video-container {
        position: relative;
        margin: 20px 0;
      }
      video {
        width: 100%;
        max-width: 600px;
        border: 2px solid #ddd;
        border-radius: 4px;
      }
      .ad-container {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        display: none;
      }
      .skip-button {
        position: absolute;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        display: none;
      }
      .controls {
        margin: 10px 0;
      }
      button {
        margin: 5px;
        padding: 8px 16px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
      .status {
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
      }
      .status.muted {
        background-color: #ffe6e6;
        border: 1px solid #ffcccc;
        color: #cc0000;
      }
      .status.unmuted {
        background-color: #e6ffe6;
        border: 1px solid #ccffcc;
        color: #006600;
      }
      .test-section {
        border: 2px dashed #ccc;
        padding: 15px;
        margin: 10px 0;
        border-radius: 4px;
      }
      .site-simulator {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin: 10px 0;
      }
      .site-btn {
        background: #28a745;
        font-size: 12px;
        padding: 6px 12px;
      }
      .site-btn.active {
        background: #dc3545;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ”‡ ê´‘ê³  ìŒì†Œê±° í™•ì¥ í”„ë¡œê·¸ë¨ í…ŒìŠ¤íŠ¸</h1>
      <p>
        ì´ í˜ì´ì§€ëŠ” ê´‘ê³  ìŒì†Œê±° í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ
        í˜ì´ì§€ì…ë‹ˆë‹¤.
      </p>

      <div class="status" id="extensionStatus">
        í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸ ì¤‘...
      </div>
    </div>

    <div class="container">
      <h2>ğŸ“º ë¹„ë””ì˜¤ í”Œë ˆì´ì–´</h2>
      <div class="video-container">
        <video id="testVideo" controls>
          <source
            src="https://www.w3schools.com/html/mov_bbb.mp4"
            type="video/mp4" />
          <p>ë¸Œë¼ìš°ì €ê°€ HTML5 ë¹„ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </video>
        <div class="ad-container" id="adBadge">ê´‘ê³ </div>
        <button class="skip-button" id="skipButton">5ì´ˆ í›„ ê±´ë„ˆë›°ê¸°</button>
      </div>

      <div class="controls">
        <button onclick="playVideo()">â–¶ï¸ ì¬ìƒ</button>
        <button onclick="pauseVideo()">â¸ï¸ ì¼ì‹œì •ì§€</button>
        <button onclick="toggleMute()">ğŸ”‡ ìŒì†Œê±° í† ê¸€</button>
        <button onclick="setVolume(0.5)">ğŸ”‰ ë³¼ë¥¨ 50%</button>
        <button onclick="setVolume(1.0)">ğŸ”Š ë³¼ë¥¨ 100%</button>
      </div>

      <div class="status" id="videoStatus"></div>
    </div>

    <div class="container">
      <h2>ğŸ§ª ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸</h2>
      <p>
        ë‹¤ì–‘í•œ ì‚¬ì´íŠ¸ì˜ ê´‘ê³  ìš”ì†Œë“¤ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ê°ì§€ ë¡œì§ì„
        í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
      </p>

      <div class="site-simulator">
        <button class="site-btn" onclick="simulateAd('tving')">
          TVING ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜
        </button>
        <button class="site-btn" onclick="simulateAd('youtube')">
          YouTube ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜
        </button>
        <button class="site-btn" onclick="simulateAd('netflix')">
          Netflix ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜
        </button>
        <button class="site-btn" onclick="simulateAd('wavve')">
          Wavve ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜
        </button>
        <button class="site-btn" onclick="clearAd()">ê´‘ê³  ì œê±°</button>
      </div>

      <div class="test-section" id="adTestArea">
        <!-- ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜ ìš”ì†Œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
      </div>
    </div>

    <div class="container">
      <h2>ğŸ“Š ì‹¤ì‹œê°„ ìƒíƒœ</h2>
      <div id="realTimeStatus">
        <p><strong>ë¹„ë””ì˜¤ ìƒíƒœ:</strong> <span id="videoState">ì •ì§€ë¨</span></p>
        <p><strong>ìŒì†Œê±° ìƒíƒœ:</strong> <span id="muteState">í•´ì œë¨</span></p>
        <p><strong>ë³¼ë¥¨:</strong> <span id="volumeState">100%</span></p>
        <p>
          <strong>ê´‘ê³  ê°ì§€:</strong> <span id="adDetected">ê°ì§€ë˜ì§€ ì•ŠìŒ</span>
        </p>
      </div>
    </div>

    <script>
      const video = document.getElementById("testVideo")
      const adBadge = document.getElementById("adBadge")
      const skipButton = document.getElementById("skipButton")
      const adTestArea = document.getElementById("adTestArea")

      let adSimulationActive = false
      let currentSite = null

      // ë¹„ë””ì˜¤ ì œì–´ í•¨ìˆ˜ë“¤
      function playVideo() {
        video.play()
      }

      function pauseVideo() {
        video.pause()
      }

      function toggleMute() {
        video.muted = !video.muted
      }

      function setVolume(level) {
        video.volume = level
      }

      // ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜ë“¤
      function simulateAd(site) {
        clearAd()
        currentSite = site
        adSimulationActive = true

        // ê¸°ë³¸ ê´‘ê³  í‘œì‹œ
        adBadge.style.display = "block"
        skipButton.style.display = "block"

        // ì‚¬ì´íŠ¸ë³„ ê´‘ê³  ìš”ì†Œ ì¶”ê°€
        switch (site) {
          case "tving":
            simulateTvingAd()
            break
          case "youtube":
            simulateYouTubeAd()
            break
          case "netflix":
            simulateNetflixAd()
            break
          case "wavve":
            simulateWavveAd()
            break
        }

        updateAdStatus()
      }

      function simulateTvingAd() {
        adTestArea.innerHTML = `
                <div class="ad-container" style="display: block;">TVING ê´‘ê³ </div>
                <div class="advertisement">ê´‘ê³  ì»¨í…Œì´ë„ˆ</div>
                <button class="skip-button" style="display: block;">ê±´ë„ˆë›°ê¸°</button>
                <div class="ad-text">ê´‘ê³ ê°€ ì¬ìƒ ì¤‘ì…ë‹ˆë‹¤</div>
            `
      }

      function simulateYouTubeAd() {
        adTestArea.innerHTML = `
                <div class="ytp-ad-badge" style="display: block;">ê´‘ê³ </div>
                <div class="ytp-ad-text">ê´‘ê³  â€¢ 5ì´ˆ í›„ ê±´ë„ˆë›¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
                <button class="ytp-ad-skip-button" style="display: block;">ê´‘ê³  ê±´ë„ˆë›°ê¸°</button>
                <div class="ytp-ad-progress">â™¦â™¦â™¦â™¦â™¦</div>
            `
      }

      function simulateNetflixAd() {
        adTestArea.innerHTML = `
                <div data-uia="ad-badge" style="display: block;">Ad</div>
                <div class="ad-container">Netflix Advertisement</div>
                <button data-uia="ad-skip-button" style="display: block;">Skip Ad</button>
            `
      }

      function simulateWavveAd() {
        adTestArea.innerHTML = `
                <div class="player-ad-container" style="display: block;">Wavve ê´‘ê³ </div>
                <button class="skip-btn" style="display: block;">ê±´ë„ˆë›°ê¸°</button>
                <div class="ad-timer">ê´‘ê³  5ì´ˆ ë‚¨ìŒ</div>
                <div class="commercial">Commercial Break</div>
            `
      }

      function clearAd() {
        adSimulationActive = false
        currentSite = null
        adBadge.style.display = "none"
        skipButton.style.display = "none"
        adTestArea.innerHTML = "<p>ê´‘ê³  ì‹œë®¬ë ˆì´ì…˜ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</p>"
        updateAdStatus()
      }

      function updateAdStatus() {
        document.getElementById("adDetected").textContent = adSimulationActive
          ? `${currentSite} ê´‘ê³  ê°ì§€ë¨`
          : "ê°ì§€ë˜ì§€ ì•ŠìŒ"
      }

      // ë¹„ë””ì˜¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      video.addEventListener("play", () => {
        document.getElementById("videoState").textContent = "ì¬ìƒ ì¤‘"
      })

      video.addEventListener("pause", () => {
        document.getElementById("videoState").textContent = "ì¼ì‹œì •ì§€"
      })

      video.addEventListener("volumechange", () => {
        const isMuted = video.muted
        const volume = Math.round(video.volume * 100)

        document.getElementById("muteState").textContent = isMuted
          ? "ìŒì†Œê±°ë¨"
          : "í•´ì œë¨"
        document.getElementById("volumeState").textContent = `${volume}%`

        // ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
        const statusDiv = document.getElementById("videoStatus")
        if (isMuted) {
          statusDiv.className = "status muted"
          statusDiv.textContent = "ğŸ”‡ ë¹„ë””ì˜¤ê°€ ìŒì†Œê±°ë˜ì—ˆìŠµë‹ˆë‹¤"
        } else {
          statusDiv.className = "status unmuted"
          statusDiv.textContent = "ğŸ”Š ë¹„ë””ì˜¤ ìŒì†Œê±°ê°€ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤"
        }
      })

      // í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸
      function checkExtensionStatus() {
        const statusDiv = document.getElementById("extensionStatus")

        if (typeof chrome !== "undefined" && chrome.runtime) {
          statusDiv.className = "status unmuted"
          statusDiv.innerHTML =
            "âœ… í™•ì¥ í”„ë¡œê·¸ë¨ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤<br>í˜„ì¬ ì‚¬ì´íŠ¸ì—ì„œ ê´‘ê³  ìŒì†Œê±° ê¸°ëŠ¥ì´ í™œì„±í™”ë©ë‹ˆë‹¤."
        } else {
          statusDiv.className = "status muted"
          statusDiv.innerHTML =
            "âŒ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤<br>Chrome í™•ì¥ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ê³  í™œì„±í™”í•´ì£¼ì„¸ìš”."
        }
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ í™•ì¸
      document.addEventListener("DOMContentLoaded", () => {
        checkExtensionStatus()
        updateAdStatus()

        // ì´ˆê¸° ë¹„ë””ì˜¤ ìƒíƒœ ì„¤ì •
        document.getElementById("videoState").textContent = "ì •ì§€ë¨"
        document.getElementById("muteState").textContent = "í•´ì œë¨"
        document.getElementById("volumeState").textContent = "100%"
      })

      // 5ì´ˆë§ˆë‹¤ ìƒíƒœ ì—…ë°ì´íŠ¸
      setInterval(() => {
        if (!video.paused && !video.ended) {
          // ì¬ìƒ ì¤‘ì¼ ë•Œë§Œ ìƒíƒœ ì—…ë°ì´íŠ¸
          updateAdStatus()
        }
      }, 1000)
    </script>
  </body>
</html>
